#!/bin/bash

echo "======================================"
echo "ğŸ§  Iniciando NHD+ - PCZEUS (Casa)"
echo "ğŸ“ Projeto: ~/DEV/Wiki-NHD"
echo "======================================"

# Garantia de caminho
cd /home/zeus/DEV/Wiki-NHD || {
  echo "âŒ Pasta Wiki-NHD nÃ£o encontrada"
  exit 1
}

# Ativar venv
if [ ! -d "venv" ]; then
  echo "âŒ venv nÃ£o encontrado. Abortando."
  exit 1
fi

echo "ğŸ Ativando ambiente virtual..."
source venv/bin/activate

# ValidaÃ§Ã£o
PY=$(which python3)
if [[ "$PY" != *"Wiki-NHD/venv"* ]]; then
  echo "âŒ Ambiente virtual incorreto"
  echo "Python atual: $PY"
  exit 1
fi

echo "âœ… venv correto ativo"

# Subir NHD+
echo "ğŸš€ Iniciando NHD+..."
cd backend || exit 1
uvicorn main:app --host 0.0.0.0 --port 8500

